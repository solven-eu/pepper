<?xml version="1.0" encoding="UTF-8"?>
<ruleset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" name="Android Application Rules" xmlns="http://pmd.sf.net/ruleset/1.0.0"
	xsi:noNamespaceSchemaLocation="http://pmd.sf.net/ruleset_xml_schema.xsd"
	xsi:schemaLocation="http://pmd.sf.net/ruleset/1.0.0 http://pmd.sf.net/ruleset_xml_schema.xsd">

	<description>Nearly all PMD rules, except those considered not relevant
		by Pepper
	</description>

	<!-- https://pmd.github.io/pmd/pmd_rules_java_codestyle.html -->
	<rule ref="category/java/bestpractices.xml">
		<exclude name="ConstantsInInterface" />
		<exclude name="GuardLogStatement" />
		<exclude name="AvoidReassigningParameters" />
	</rule>
	<rule ref="category/java/codestyle.xml">
		<!-- Excluded to be later configured -->
		<exclude name="LongVariable" />
		<!-- Might be interesting to re-introduce to prevent single-char variable -->
		<exclude name="ShortVariable" />
		<exclude name="ShortMethodName" />
		<exclude name="ShortClassName" />
		<exclude name="MethodArgumentCouldBeFinal" />
		<exclude name="LocalVariableCouldBeFinal" />
		<exclude name="OnlyOneReturn" />
		<exclude name="AtLeastOneConstructor" />
		<exclude name="CommentDefaultAccessModifier" />
		<exclude name="DefaultPackage" />
		<!-- Agent module is in JDK1.6 which has no diamond operator -->
		<exclude name="UseDiamondOperator" />
		<!-- TODO We should remove this -->
		<exclude name="ClassNamingConventions" />
		<exclude name="AvoidFinalLocalVariable" />
		<exclude name="UnnecessaryLocalBeforeReturn" />
		<!-- TODO Clear this exclusion -->
		<exclude name="ConfusingTernary" />
		<exclude name="CallSuperInConstructor" />
	</rule>
	<!-- https://pmd.github.io/latest/pmd_rules_java_codestyle.html#longvariable -->
	<rule ref="category/java/codestyle.xml/LongVariable">
		<properties>
			<property name="minimum" value="50" />
		</properties>
	</rule>
	<rule ref="category/java/design.xml">
		<!-- 'Removed misconfigured rule: LoosePackageCoupling cause: No packages or classes specified' -->
		<exclude name="LoosePackageCoupling" />
		<!-- https://pmd.github.io/latest/pmd_rules_java_design.html#lawofdemeter -->
		<exclude name="LawOfDemeter" />
		<!-- PMD requires private contructors -->
		<exclude name="UseUtilityClass" />
		<exclude name="AvoidCatchingGenericException" />
		<!-- TODO Clear this exclusion -->
		<exclude name="CyclomaticComplexity" />
		<exclude name="AvoidThrowingRawExceptionTypes" />
		<exclude name="NPathComplexity" />
		<exclude name="SimplifyBooleanReturns" />
		<exclude name="TooManyMethods" />
		<exclude name="ExcessiveImports" />
		<exclude name="NcssCount" />
		<exclude name="DataClass" />
		<exclude name="UseObjectForClearerAPI" />
	</rule>
	<rule ref="category/java/design.xml/NPathComplexity">
		<properties>
			<!-- TODO Lower this value -->
			<property name="reportLevel" value="1000" />
		</properties>
	</rule>
	<rule ref="category/java/design.xml/TooManyMethods">
		<properties>
			<property name="maxmethods" value="50" />
		</properties>
	</rule>
	<rule ref="category/java/design.xml/ExcessiveImports">
		<properties>
			<property name="minimum" value="200" />
		</properties>
	</rule>
	<rule ref="category/java/design.xml/NcssCount">
		<properties>
			<property name="methodReportLevel" value="600" />
			<property name="classReportLevel" value="15000" />
		</properties>
	</rule>
	<rule ref="category/java/documentation.xml">
		<exclude name="CommentRequired" />
		<exclude name="CommentSize" />
	</rule>
	<rule ref="category/java/documentation.xml/CommentSize">
		<properties>
			<property name="maxLines" value="20" />
			<property name="maxLineLength" value="150" />
		</properties>
	</rule>
	<rule ref="category/java/errorprone.xml">
		<exclude name="BeanMembersShouldSerialize" />
		<exclude name="AvoidLiteralsInIfCondition" />
		<!-- TODO Clear this exclusion -->
		<exclude name="DataflowAnomalyAnalysis" />
		<exclude name="AvoidCatchingThrowable" />
		<exclude name="AvoidCatchingNPE" />
	</rule>
	<rule ref="category/java/multithreading.xml">
		<exclude name="DoNotUseThreads" />
		<exclude name="UseConcurrentHashMap" />
	</rule>
	<rule ref="category/java/performance.xml">
		<exclude name="UseStringBufferForStringAppends" />
		<!-- TODO Investigate if you could remove this rule -->
		<exclude name="AvoidInstantiatingObjectsInLoops" />
		<exclude name="RedundantFieldInitializer" />
		<!-- This would lead replace .startWith by .charAt(0) without checking for string emptyness -->
		<exclude name="SimplifyStartsWith" />
	</rule>
	<rule ref="category/java/security.xml" />

	<!-- <rule ref="rulesets/java/basic.xml"> -->
	<!-- We consider it is sometimes clearer to break an AND condition in multiple ifs, typically to add comments between the steps -->
	<!-- <exclude name="CollapsibleIfStatements" /> -->
	<!-- </rule> -->

	<!-- <rule ref="rulesets/java/unnecessary.xml"> -->
	<!-- MAT introduced many final classes with final methods: keep final methods in case the final on class is removed -->
	<!-- <exclude name="UnnecessaryFinalModifier" /> -->
	<!-- </rule> -->

</ruleset>